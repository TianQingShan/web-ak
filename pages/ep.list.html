<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no,viewport-fit=cover" />
    <title></title>
    <link href="../content/css/base.css" rel="stylesheet" />
    <link href="../content/css/vant.css" rel="stylesheet" />
    <link href="../content/css/pages/ep.list.css" rel="stylesheet" />
    <link href="../content/css/bottom.css" rel="stylesheet" />
	 <style>
         
.van-tabs--line-Sub {
    padding-top: 2px;
	padding-bottom: 2px;
}
.vantabsline_Sub {
    z-index: 1;
    left: 0;
    bottom: 15px;
    height: 2px;
    position: absolute;
    background-color: #f44;
}
</style>
</head>

<body>
    <div id="app">
        <div id="app-content" v-bind:style="{'paddingTop': statusbarHeight + 'px'}">
            <div class="bg" v-bind:style="{'height': statusbarHeight + 'px'}"></div>
            <van-tabs v-model="tabActive" v-cloak v-bind:style="{'top': statusbarHeight + 'px'}" @change="tabChange">
                <van-tab v-for="(tab,tIndex) in tabControl" v-bind:key="tIndex" v-bind:title="tab.title">
                    <van-pull-refresh v-model="isReloading" @refresh="onRefresh" v-bind:pulling-text="language.PULLING_TEXT" v-bind:loosing-text="language.LOOSING_TEXT" v-bind:loading-text="language.LOADING_TEXT" v-bind:success-text="language.SUCCESS_TEXT">
                        <div slot="loading" class="pull_refresh">
                            <img src="../content/img/reloading.svg" class="pull_refresh_img" />
                            <span class="pull_refresh_text" v-text="language.LOADING_TEXT"></span>
                        </div>
						<div v-if="tab.type===1 && currentUser.LevelNumber>=3" class="input_group">
								<div class="input_line van-hairline--bottom" >
									<div class="input_control">
										<div class="pos">
											<div class="block" v-bind:class="{'checked': form.Position === 2}" @click="Position(2)">
												<i v-show="form.Position === 2" class="iconfont iconiconselected"></i>
												<span v-text="language.TAB_5">LEFT</span>
											</div>
											<div class="block" v-bind:class="{'checked': form.Position === 1}" @click="Position(1)">
												<i v-show="form.Position === 1" class="iconfont iconiconselected"></i>
												<span v-text="language.TAB_4">RIGHT</span> 
											</div>
										</div>
									</div>
							</div>
						</div>
                        <div v-if="tab.isLoading" class="loading-box p50"> 
                            <van-loading color="black"></van-loading>
                            <p class="loading-text" v-text="language.LOADING_TEXT"></p>
                        </div>
						
							
						
                        <div v-else>
                            <div v-if="tab.list.length === 0" class="none-data p50">
                                <i class="iconfont iconkong"></i>
                                <p class="none-data-text" v-text="language.NONE_DATA_TEXT">暂无订单信息</p>
                            </div>
                            <div v-else>
							
							 
							

						 
					 
							
								<form action="/">
									<van-search class="fixed_top"
												v-bind:style="{'top': (45 + statusbarHeight) + 'px'}"
												v-model="searchKey"
												v-bind:placeholder="language.INPUT_PLAYER_ID"
												show-action
												@search="onSearch"
												@cancel="onCancel"
												@blur="isFocus = false"
												@focus="isFocus = true">
										<i slot="left-icon" class="iconfont iconsousuo"></i>
										<div slot="action" @click="onSearch" v-text="language.SEARCH">搜索</div>
									</van-search>   
								</form>  
			
								
			
                                <ul class="list">
                                    <li v-for="(item,index) in tab.list" v-bind:key="index" @click="gotoDetail(item)">
                                        <!-- <div class="top clearfix">
                                            <img v-lazy="item.Seller.Avatar" class="image" />
                                            <div class="fn" v-text="item.Seller.FlowNumber"></div>
                                            <div v-if="item.Status !== 4" class="state blue" v-text="item.StatusName">
                                            </div>
                                            <div v-else class="state green" v-text="language.TAB_4_STATE"></div>
                                        </div> -->
                                        <div style="display: flex;align-items: center;">
                                            <img v-lazy="item.Seller.Avatar" class="image" style="width: 28px;
                                            height: 28px;
                                            display: block;
                                            border-radius: 50%;
                                            float: left;
                                            border: 1px solid #efefef;" />
                                            <div style="flex: 1;display: flex;align-items: center;justify-content: space-between;padding: 0 10px;color: #068dfe;">
                                                <div class="fn" v-text="item.Seller.FlowNumber"></div>
                                                <div v-if="item.Status == 2 || item.Status == 4 || item.Status == 16 || item.Status == 32" style="position: relative;background: #068dfe;color:#fff;padding: 2px 5px;border-radius: 0px; ; font-size:12px" @click.stop="APP.GLOBAL.gotoNewWindow(0,'center/chatroom',{param:'id='+item.Id})">联系对方<i v-if="item.Seller.Isunread" style="position: absolute;top: -4px;right: -4px;width: 8px;height: 8px;border-radius: 4px;background-color: #f00;"></i></div>
                                                <!--<div style="font-size: .8em;" v-if="item.Status !== 2" class="state blue" v-text="item.StatusName"></div>!-->
												<div style="font-size: .8em;"  class="state blue" v-text="item.StatusName"></div>
                                                <!--<div v-else class="state green" style="font-size: .8em;" v-text="language.TAB_4_STATE"></div>!-->
                                            </div>
                                        </div>
                                        <ul class="info">
                                            <li>
                                                <p class="value" v-text="numberFormat(item.EPAmount, 0)"></p>
                                                <p class="text" v-text="language.LI_1_TEXT">EP數量</p>
                                            </li>
                                            <li v-if="item.ReceiveType === null || item.ReceiveType === '1' || item.ReceiveType === '3'">
                                                <p class="value" v-text="numberFormat(item.Netincome, 2)">‭‬
                                                </p>
                                                <p class="text" v-text="item.Currency">CNY</p>
                                            </li>
                                            <li v-else-if="item.ReceiveType === '2'">
                                                <p class="value" v-text="item.Netincome">‭‬</p>
                                                <p class="text" v-text="item.Currency">USDT</p>
                                            </li>
                                        </ul>
                                        <div class="bottom clearfix">
                                            <div class="support_pay" v-if="tabActive === 1 && ((item.Status === 4 || item.Status === 32) && item.Seller.FlowNumber == currentUser.FlowNumber)">
                                                <button class="receive_button" @click.stop="receiveConfirm(item)" v-text="language.RECEIVE_BUTTON">
                                                    確認收款
                                                </button>
                                            </div>
											<div class="support_pay" v-else >
												<p class="text" v-text="item.Nation">USDT</p>
											    <!--<img src="../content/img/pays/yl_pay.png" v-if="item.ReceiveType === null || item.ReceiveType === '1'" class="pay_icon" />
											    <img src="../content/img/pays/usdt_pay.png" v-if="item.ReceiveType === '2'" class="pay_icon" />
											    <img src="../content/img/pays/ali_pay.png" v-if="item.ReceiveType === '3'" class="pay_icon" />!-->
											</div>
                                            
                                            <p class="time" v-text="item.CreateTime"></p>
                                        </div>
                                    </li>
                                </ul>
                                <div v-if="tab.isLoadMore" class="load_more clearfix">
                                    <van-loading color="black"></van-loading>
                                    <span class="load_text" v-text="language.LOADING_TEXT">正在加載...</span>
                                </div>
                                <div v-if="tab.isLoadComplete" class="load_more_complete">
                                    <span class="load_text" v-text="language.LOAD_COMPLETE_TEXT">沒有更多的數據了...</span>
                                </div>
                            </div>
                        </div>
                    </van-pull-refresh>
                </van-tab>
            </van-tabs>
        </div>
        <div id="bottom" class="panel pos van-hairline--top">
            <ul id="bottom-menus-items" class="menus clearfix">
                <li v-for="(item, index) in menus" v-bind:key="index" v-bind:class="{'active': currentIndex === item.index}" @click="window.location = item.url">
                    <i class="iconfont icon" v-bind:class="[currentIndex === item.index ? item.active : item.default]"></i>
                    <p class="menus-text" v-text="item.text"></p>
                </li>
            </ul>
        </div>
    </div>
    <script src="../content/js/vue.js?v=28"></script>
    <script src="../content/js/vant.min.js?v=28"></script>
    <script src="../content/js/base.js?v=28"></script>
    <script src="../content/js/pages/ep.list.js?v=28"></script>
</body>

</html>